<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>아이템 제작기</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #f8f8f8;
    }

    .item-container {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .result {
      flex: 1;
      text-align: center;
    }

    .result img {
      max-width: 32px;
      max-height: 32px;
    }

    .price {
      font-size: 20px;
      font-weight: bold;
      margin-top: 10px;
    }

    .after-fee {
      font-size: 14px;
      color: #888;
      margin-top: 4px;
    }

    .materials {
      flex: 2;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding-left: 20px;
    }

    .material {
      text-align: center;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    .material img {
      max-width: 32px;
      max-height: 32px;
      margin-bottom: 5px;
    }

    input[type="number"] {
      width: 80px;
      padding: 5px;
      font-size: 14px;
      text-align: center;
    }

    hr {
      margin: 30px 0;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<!-- 완성템 A -->
<div class="item-container">
  <div class="result">
    <img src="mImage/보킬.png" alt="보스 킬러의 비약">
    <div class="price" id="price-보킬">0 원</div>
    <div class="after-fee" id="after-fee-보킬">0 원 (수수료 제외)</div>
  </div>
  <div class="materials">
    <div class="material">
      <img src="mImage/히솝꽃오일.png" alt="히솝 꽃 오일">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('보킬')" data-ratio="10">
    </div>
    <div class="material">
      <img src="mImage/황정.png" alt="황혼의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('보킬')" data-ratio="3">
    </div>
    <div class="material">
      <img src="mImage/뒤시정.png" alt="뒤틀린 시간의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('보킬')" data-ratio="15">
    </div>
    <div class="material">
      <img src="mImage/마결.png" alt="마력 결정">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('보킬')" data-ratio="10">
    </div>
  </div>
</div>

<hr>

<!-- 완성템 B -->
<div class="item-container">
  <div class="result">
    <img src="mImage/고보킬.png" alt="고급 보스 킬러의 비약">
    <div class="price" id="price-고보킬">0 원</div>
    <div class="after-fee" id="after-fee-고보킬">0 원 (수수료 제외)</div>
  </div>
  <div class="materials">
    <div class="material">
      <img src="mImage/보킬.png" alt="보스 킬러의 비약">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('고보킬')" data-ratio="1">
    </div>
    <div class="material">
      <img src="mImage/히솝꽃오일.png" alt="히솝 꽃 오일">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('고보킬')" data-ratio="10">
    </div>
    <div class="material">
      <img src="mImage/상주정.png" alt="상급 주문의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('고보킬')" data-ratio="1">
    </div>
    <div class="material">
      <img src="mImage/영황정.png" alt="영롱한 황혼의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('고보킬')" data-ratio="1">
    </div>
  </div>
</div>

<hr>

<!-- 완성템 C -->
<div class="item-container">
  <div class="result">
    <img src="mImage/숫돌.png" alt="숫돌">
    <div class="price" id="price-숫돌">0 원</div>
    <div class="after-fee" id="after-fee-숫돌">0 원 (수수료 제외)</div>
  </div>
  <div class="materials">
    <div class="material">
      <img src="mImage/최상결.png" alt="최상급 아이템 결정">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('숫돌')" data-ratio="10">
    </div>
    <div class="material">
      <img src="mImage/뒤시정.png" alt="뒤틀린 시간의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('숫돌')" data-ratio="10">
    </div>
    <div class="material">
      <img src="mImage/상주정.png" alt="상급 주문의 정수">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('숫돌')" data-ratio="10">
    </div>
  </div>
</div>

<hr>

<!-- 완성템 D -->
<div class="item-container">
  <div class="result">
    <img src="mImage/소재비.png" alt="소재비">
    <div class="price" id="price-소재비">0 원</div>
    <div class="after-fee" id="after-fee-소재비">0 원 (수수료 제외)</div>
  </div>
  <div class="materials">
    <div class="material">
      <img src="mImage/쥬니퍼베리씨앗오일.png" alt="쥬니퍼베리 씨앗 오일">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('소재비')" data-ratio="5">
    </div>
    <div class="material">
      <img src="mImage/최상결.png" alt="최상급 아이템 결정">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('소재비')" data-ratio="2">
    </div>
    <div class="material">
      <img src="mImage/현돌.png" alt="현자의 돌">
      <input type="number" placeholder="가격 입력" oninput="updatePrice('소재비')" data-ratio="1">
    </div>
  </div>
</div>

<script>
  const itemData = {
    보킬: { yield: 2 },
    고보킬: { yield: 1 },
    숫돌: { yield: 3 },
    소재비: { yield: 3 }
  };

  function updatePrice(itemId) {
    const container = document.querySelector(`#price-${itemId}`).closest('.item-container');
    const inputs = container.querySelectorAll('input[type="number"]');
    const { yield: outputCount } = itemData[itemId];
    let total = 0;

    inputs.forEach(input => {
      const val = parseFloat(input.value);
      const ratio = parseFloat(input.dataset.ratio || "1"); // data-ratio 사용
      if (!isNaN(val) && !isNaN(ratio)) {
        total += val * ratio;
      }
    });

    const perItemCost = Math.floor(total / outputCount);     // 1개당 실제 원가
    const salePrice = Math.ceil(perItemCost / 0.95);         // 수수료 포함 판매가

    document.getElementById(`price-${itemId}`).textContent = `${salePrice.toLocaleString()} 원`;
    document.getElementById(`after-fee-${itemId}`).textContent = `${perItemCost.toLocaleString()} 원 (실제 수익)`;
  }
</script>


</body>
</html>
